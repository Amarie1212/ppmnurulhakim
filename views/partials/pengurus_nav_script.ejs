<script>
  /* Navigation Logic untuk Pengurus Pages - Popup Menu */
  (function initNav(){
    const btn = document.getElementById('navToggle');
    const menu = document.getElementById('pengurusMenu');
    const scrim = document.getElementById('pengurusScrim');

    if (!btn || !menu) return;

    function openMenu() {
      btn.classList.add('active');
      menu.style.display = 'flex';
      menu.offsetHeight; // Force reflow
      menu.classList.add('open');
      scrim.classList.add('open');
    }

    function closeMenu() {
      btn.classList.remove('active');
      menu.classList.remove('open');
      scrim.classList.remove('open');
      setTimeout(() => {
        if(!menu.classList.contains('open')) menu.style.display = 'none';
      }, 200);
    }

    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      menu.classList.contains('open') ? closeMenu() : openMenu();
    });

    if(scrim) scrim.addEventListener('click', closeMenu);
    
    // Close menu when clicking any link
    menu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', closeMenu);
    });
  })();

  /* Theme Logic */
  (function initTheme(){
    const root = document.documentElement;
  function setIcon(theme){
      const sun = '<svg class="icon" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><line x1="12" y1="1" x2="12" y2="4"/><line x1="12" y1="20" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="6.34" y2="6.34"/><line x1="17.66" y1="17.66" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="4" y2="12"/><line x1="20" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="6.34" y2="17.66"/><line x1="17.66" y1="6.34" x2="19.78" y2="4.22"/></svg>';
      const moon = '<svg class="icon" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>';
      const fab = document.getElementById('themeFab');
      if(fab) fab.innerHTML = (theme==='light') ? moon : sun;
    }
    function applyTheme(theme){
      root.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme); 
      setIcon(theme);
    }
    
    const saved = localStorage.getItem('theme');
    if(saved){ applyTheme(saved); } 
    else {
      const prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
      applyTheme(prefersLight ? 'light' : 'dark');
    }
    
    document.getElementById('themeFab')?.addEventListener('click',()=>{
      const isLight = root.getAttribute('data-theme')==='light'; 
      applyTheme(isLight ? 'dark' : 'light');
    });
  })();
</script>


