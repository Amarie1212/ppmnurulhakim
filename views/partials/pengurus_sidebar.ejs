<!-- Sidebar untuk Pengurus (Desktop: Panel Samping, Mobile: Dropdown) -->



<!-- Mobile Dropdown -->
<div id="mobileDropdown" class="admin-dd">
  <div class="admin-dd-head">
    <div class="admin-dd-title">Menu Pengurus</div>
    <div class="admin-dd-sub">Halo, <%= user.name %> (<%= user.role.toUpperCase() %>)</div>
  </div>
  <a class="admin-dd-item <%= currentPage === 'home' ? 'active' : '' %>" href="/pengurus/home">
    <div style="display:flex; align-items:center; gap:10px;">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
      Beranda Admin
    </div>
  </a>
  <a class="admin-dd-item" href="/">
    <div style="display:flex; align-items:center; gap:10px;">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
      Lihat Website
    </div>
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14" style="opacity:0.5"><line x1="7" y1="17" x2="17" y2="7"/><polyline points="7 7 17 7 17 17"/></svg>
  </a>

  <% if (user.role !== 'keuangan') { %>
    <a class="admin-dd-item <%= currentPage === 'santri' ? 'active' : '' %>" href="/pengurus">
      <div style="display:flex; align-items:center; gap:10px;">
        Data Santri
      </div>
    </a>
  <% } %>
  
  <% if (user.role === 'admin' || user.role === 'panitia') { %>
    <a class="admin-dd-item <%= currentPage === 'verifikasi' ? 'active' : '' %>" href="/pengurus/verifikasi">
      <div style="display:flex; align-items:center; gap:10px;">
        Verifikasi Pendaftaran
      </div>
      <% if(stat && stat.pending > 0){ %>
        <span style="background:var(--danger); color:white; padding:2px 8px; border-radius:10px; font-size:0.75rem; font-weight:700;"><%= stat.pending %></span>
      <% } %>
    </a>
  <% } %>
  <% if (user.role === 'admin' || user.role === 'keuangan') { %>
    <a class="admin-dd-item <%= currentPage === 'verif-bayar' ? 'active' : '' %>" href="/pengurus/verifikasi-pembayaran" style="display:flex; justify-content:space-between; align-items:center;">
      Verifikasi Pembayaran
      <% if(stat && stat.pending_payment > 0){ %>
        <span style="background:var(--danger); color:white; padding:2px 8px; border-radius:10px; font-size:0.7em;"><%= stat.pending_payment %></span>
      <% } %>
    </a>
  <% } %>
  <% if (user.role === 'admin' || user.role === 'keuangan') { %>
    <a class="admin-dd-item <%= currentPage === 'laporan-bayar' ? 'active' : '' %>" href="/pengurus/laporan-pembayaran">Laporan Pembayaran</a>
  <% } %>
  <% if (user.role === 'admin' || user.role === 'ketua') { %>
    <a class="admin-dd-item <%= currentPage === 'laporan-masuk' ? 'active' : '' %>" href="/pengurus/laporan-masuk">Laporan Pembayaran Masuk</a>
  <% } %>


  <% if (user.role === 'admin') { %>
    <a class="admin-dd-item <%= currentPage === 'akun' ? 'active' : '' %>" href="/pengurus/kelola-akun">Kelola Akun Pengurus</a>
  <% } %>
  <% if (user.role === 'admin' || user.role === 'panitia') { %>
    <a class="admin-dd-item <%= currentPage === 'kelola-pengumuman' ? 'active' : '' %>" href="/pengurus/kelola-pengumuman">Kelola Pengumuman</a>
  <% } %>
  <a class="admin-dd-item danger" href="/logout">Logout</a>
</div>
<div id="mobileScrim" class="admin-dd-scrim"></div>

<!-- Desktop Sidebar Panel -->
<aside id="panelPengurus" class="panel-pengurus" hidden>
  <div class="panel-head">
    <div>
      <div class="panel-title">Pengurus</div>
      <div class="panel-sub">Halo, <%= user.name %> (<%= user.role.toUpperCase() %>)</div>
    </div>
    <button class="panel-close" id="closePanelPengurus">×</button>
  </div>
  <nav class="panel-nav panel-body">
    <a href="/pengurus/home" class="panel-link <%= currentPage === 'home' ? 'active' : '' %>">Beranda Admin</a>
    <a href="/" class="panel-link" style="color:var(--accent)">Lihat Website Utama ↗</a>
    <div style="height:1px; background:var(--border); margin:10px 0;"></div>

    <% if (user.role !== 'keuangan') { %>
      <a href="/pengurus" class="panel-link <%= currentPage === 'santri' ? 'active' : '' %>">Data Santri</a>
    <% } %>
    <% if (user.role === 'admin' || user.role === 'panitia') { %>
      <a href="/pengurus/verifikasi" class="panel-link <%= currentPage === 'verifikasi' ? 'active' : '' %>">
        Verifikasi Pendaftaran 
        <% if(stat && stat.pending > 0){ %>
          <span style="background:var(--danger); color:white; padding:2px 8px; border-radius:10px; font-size:0.7em; margin-left:auto"><%= stat.pending %></span>
        <% } %>
      </a>
    <% } %>
    <% if (user.role === 'admin' || user.role === 'keuangan') { %>
        <a href="/pengurus/verifikasi-pembayaran" class="panel-link <%= currentPage === 'verif-bayar' ? 'active' : '' %>">
          Verifikasi Pembayaran
          <% if(stat && stat.pending_payment > 0){ %>
            <span style="background:var(--danger); color:white; padding:2px 8px; border-radius:10px; font-size:0.7em; margin-left:auto"><%= stat.pending_payment %></span>
          <% } %>
        </a>
    <% } %>
    <% if (user.role === 'admin' || user.role === 'keuangan') { %>
        <a href="/pengurus/laporan-pembayaran" class="panel-link <%= currentPage === 'laporan-bayar' ? 'active' : '' %>">Laporan Pembayaran</a>
    <% } %>
    <% if (user.role === 'admin' || user.role === 'ketua') { %>
        <a href="/pengurus/laporan-masuk" class="panel-link <%= currentPage === 'laporan-masuk' ? 'active' : '' %>">Laporan Pembayaran Masuk</a>
    <% } %>


    <% if (user.role === 'admin') { %>
      <a href="/pengurus/kelola-akun" class="panel-link <%= currentPage === 'akun' ? 'active' : '' %>">Kelola Akun Pengurus</a>
    <% } %>
    <% if (user.role === 'admin' || user.role === 'panitia') { %>
      <a href="/pengurus/kelola-pengumuman" class="panel-link <%= currentPage === 'kelola-pengumuman' ? 'active' : '' %>">Kelola Pengumuman</a>
    <% } %>
  </nav>
  <div class="panel-footer">
    <a href="/logout" class="logout-btn">Logout</a>
  </div>
</aside>
<div class="panel-scrim" id="panelPengurusScrim" hidden></div>


